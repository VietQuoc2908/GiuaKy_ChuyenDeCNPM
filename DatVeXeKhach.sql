CREATE DATABASE DatVeXeKhach
GO
USE DatVeXeKhach
GO

---Table
--Khách hàng
CREATE TABLE KhachHang
(
	Sdt VARCHAR(10) PRIMARY KEY,
	HoTen NVARCHAR(50) NOT NULL,
	DiaChi NVARCHAR(100)
)
GO
-- Xe
CREATE TABLE Xe
(
	BienSo VARCHAR(10) PRIMARY KEY,
	TenXe NVARCHAR(50) NOT NULL,
	SoChoNgoi INT NOT NULL DEFAULT 30,
	TinhTrang INT NOT NULL DEFAULT 0
)
GO


--Lịch trình
CREATE TABLE LichTrinh
(
	MaLT INT IDENTITY(102,1) PRIMARY KEY,
	BienSo VARCHAR(10) NOT NULL,
	GioDi VARCHAR(5) NOT NULL,
	NgayDi DATETIME NOT NULL,
	DiemDi NVARCHAR(50),
	DiemDen NVARCHAR(50),
	GiaTien MONEY NOT NULL,
	TrangThai INT NOT NULL DEFAULT 0,
	FOREIGN KEY (BienSo) REFERENCES dbo.Xe(BienSo)
)
GO



CREATE TABLE Ve
(
	MaVe INT IDENTITY(1, 1) PRIMARY KEY,
	MaLT INT NOT NULL,
	MaGhe VARCHAR(3),
	Sdt VARCHAR(10),
	TrangThai INT NOT NULL DEFAULT 0,
	GioDi VARCHAR(5),
	GiaVe MONEY DEFAULT 0,
	FOREIGN KEY (MaLT) REFERENCES dbo.LichTrinh(MaLT), 
	FOREIGN KEY (Sdt) REFERENCES dbo.KhachHang(Sdt)
)
GO

--Chen du lieu
INSERT INTO KhachHang VALUES ( '0123451234', 'Vien Hoang Long', 'Soc Trang'),
( '0987654321', 'Pham Quoc Viet', 'Bac Lieu'),
( '0123459876', 'Nguyen Tien Dung', 'Ha Tinh')
GO
INSERT INTO Xe VALUES 
( '83K-30303', 'ST-SG', 30,1),
( '83K-10101', 'ST-DT', 30,1),
( '59K-10102', 'SG-ST', 30,1),
( '59K-10103', 'SG-BL', 30,1),
( '59K-10104', 'SG-HT', 30,1)
GO
INSERT INTO LichTrinh VALUES 
( '83K-30303', '7:00', '12-12-2020', 'Soc Trang','Sai Gon', 180000, 1),
( '83K-10101', '12:00', '12-12-2020', 'Soc Trang','Dong Thap',160000,1),
( '59K-10102', '7:00', '12-12-2020', 'Sai Gon','Soc Trang', 180000,1),
( '59K-10103', '9:00', '12-12-2020', 'Sai Gon','Bac Lieu',200000,1),
( '59K-10104', '12:00', '12-12-2020', 'Sai Gon','Ha Tinh',300000,1)
GO
